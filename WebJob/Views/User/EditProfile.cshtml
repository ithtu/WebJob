@model WebJob.Models.employee
@{
    ViewBag.Title = "EditProfile";

}

<link href="~/Content/register.css" rel="stylesheet" />
<link href="~/Content/list.css" rel="stylesheet" />
<link href="~/Content/Body.css" rel="stylesheet" />
<link href="~/Content/save.css" rel="stylesheet" />
<div class="container">
    <div class="main-content container-fluid" id="homepage">
        <div class="job-skill-indices">
            <h1 class="job-skill-index-headline">My Profile</h1>
            @using (@Html.BeginForm("EditProfile", "User", FormMethod.Post, new { @id = "formRes", @class = "form-css" }))
            {
                <div class="form-group inline-form">
                    <img id="pictureUpload" class="icon icon-user" src="@Html.DisplayFor(model => model.avatar)" style="width: 200px; height: 200px; border-radius: 50%" />
                    <input name="logo" value="@Html.DisplayFor(model => model.avatar)" style="display:none" />
                    <input type="file" name="fileUpload" id="fileUpload" accept="image/*"
                           style="display:none;" />

                    <input type="button" id="btnUpload" value="Chọn" class="btn btn-success" />

                </div>
                <div class="form-group inline-form">
                    <strong for="Name">Họ và Tên:</strong> <input value="@Html.DisplayFor(model => model.name_employee)" name="name" />
                </div>
                <div class="form-group inline-form">
                    <strong for="dob">Ngày sinh: </strong> <input type="date" value="@Model.day_birth.Value.ToShortDateString()" name="birthday" />
                </div>
                <div class="form-group inline-form">
                    <strong for="Address">Địa chủ: </strong><input value=" @Html.DisplayFor(model => model.address_employee)" name="address" />
                </div>
                <div class="form-group inline-form select-gender">
                    <strong class="sex-form" for="sex">Giới tính: </strong>
                    <select name="gender">
                        <option>Male</option>
                        <option>Female</option>
                    </select>

                </div>
                <div class="form-group inline-form">
                    <strong for="email">Email: </strong><input value="@Html.DisplayFor(model => model.email)" name="email" />
                </div>
                <div class="form-group inline-form">
                    <strong for="phone">Số điện thoại: </strong><input value="@Html.DisplayFor(model => model.phonenumber_employee)" name="phone" />
                </div>
                <button class="btn btn-info" type="submit">Save</button>
            }

        </div>
    </div>
</div>

@section upload
    {
    <script>
        $(function () {
            $('#btnUpload').click(function () {
                $('#fileUpload').trigger('click');
            });
        });
        $('#fileUpload').change(function () {
            if (window.FormData !== undefined) {
                var fileUpload = $('#fileUpload').get(0);
                var files = fileUpload.files;
                var formData = new FormData();
                formData.append('file', files[0]);
                $.ajax(
                    {
                        type: 'POST',
                        url: '/User/ProcessUpload',
                        contentType: false,
                        processData: false,
                        data: formData,
                        success: function (urlImage) {
                            $('#pictureUpload').attr('src', urlImage);
                            $('#logo').val(urlImage);
                        },
                        error: function (err) {
                            alert('Error ', err.statusText);
                        }
                    });
            }
        });
    </script>
}